<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>शिवगौरी एग्रो - कृषि विशेषज्ञता</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* कस्टम फॉन्ट सेटिंग्स */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fdee; /* हल्का हरा/ऑफ-व्हाइट बैकग्राउंड */
        }
        /* AI आउटपुट कंटेनर के लिए एनिमेशन */
        .ai-output-enter {
            opacity: 0;
            max-height: 0;
            transition: opacity 0.5s ease-out, max-height 0.5s ease-out;
            overflow: hidden;
        }
        .ai-output-enter-active {
            opacity: 1;
            max-height: 500px; /* पर्याप्त बड़ी वैल्यू */
        }
    </style>
</head>
<body>

    <!-- Firebase Configuration and Utility Variables -->
    <script>
        // Canvas द्वारा प्रदान किए गए ग्लोबल वेरिएबल
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db, auth, userId;
    </script>

    <!-- Firebase SDK Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Initialize Firebase
        if (Object.keys(firebaseConfig).length > 0) {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            setLogLevel('Debug');
        
            // Authentication Logic
            if (initialAuthToken) {
                signInWithCustomToken(auth, initialAuthToken).catch(console.error);
            } else {
                signInAnonymously(auth).catch(console.error);
            }

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    userId = user.uid;
                    console.log("Authenticated with UID:", userId);
                } else {
                    userId = crypto.randomUUID(); // Fallback for unauthenticated state
                    console.log("Signed in anonymously. User ID:", userId);
                }
            });
        } else {
             console.error("Firebase config is missing. Data storage will not work.");
        }
    </script>
    
    <!-- AI Logic Script -->
    <script>
        // AI API Key (Canvas handles this)
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        /**
         * AI विशेषज्ञ से सलाह लेने के लिए फंक्शन
         * @param {string} problem - फसल का नाम और समस्या
         */
        async function fetchAIAdvice(problem) {
            const outputDiv = document.getElementById('ai-output');
            const loadingDiv = document.getElementById('ai-loading');
            const resultContent = document.getElementById('ai-result-content');

            outputDiv.classList.remove('ai-output-enter-active');
            outputDiv.classList.add('ai-output-enter');
            resultContent.innerHTML = '';
            loadingDiv.classList.remove('hidden');

            const systemPrompt = "आप एक अनुभवी भारतीय कृषि विशेषज्ञ हैं। उपयोगकर्ता द्वारा बताई गई फसल और समस्या के लिए, 4-5 लाइनों में एक संक्षिप्त, शुरुआती निदान (primary diagnosis) और सामान्य समाधान (general solution) प्रदान करें। अपनी सलाह हिंदी में दें और यह स्पष्ट करें कि यह सलाह व्यक्तिगत खेत के दौरे का विकल्प नहीं है।";
            
            const userQuery = `फसल: ${problem}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
                // Google Search grounding for up-to-date agricultural knowledge
                tools: [{ "google_search": {} }],
            };

            const maxRetries = 3;
            let currentDelay = 1000;

            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API response status: ${response.status}`);
                    }

                    const result = await response.json();
                    const text = result.candidates?.[0]?.content?.parts?.[0]?.text || "क्षमा करें, AI सलाह जनरेट नहीं कर पाया।";
                    
                    resultContent.innerHTML = formatTextForHTML(text);
                    outputDiv.classList.remove('ai-output-enter');
                    outputDiv.classList.add('ai-output-enter-active');
                    loadingDiv.classList.add('hidden');
                    return;

                } catch (error) {
                    console.error("AI API call failed:", error);
                    if (i < maxRetries - 1) {
                        await new Promise(resolve => setTimeout(resolve, currentDelay));
                        currentDelay *= 2; // Exponential backoff
                    } else {
                        resultContent.innerHTML = `<p class="text-red-600">क्षमा करें, सलाह देने में कोई त्रुटि आई। कृपया बाद में प्रयास करें।</p>`;
                        outputDiv.classList.remove('ai-output-enter');
                        outputDiv.classList.add('ai-output-enter-active');
                        loadingDiv.classList.add('hidden');
                    }
                }
            }
        }

        // टेक्स्ट को HTML में फ़ॉर्मेट करने के लिए (जैसे न्यूलाइन को <br> में बदलना)
        function formatTextForHTML(text) {
            // Markdown list support (simple)
            text = text.replace(/^- (.*)/gm, '<li>$1</li>');
            if (text.includes('<li>')) {
                text = '<ul>' + text + '</ul>';
            }
            // Simple newline replacement
            return text.replace(/\n/g, '<br>');
        }

        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('ai-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const problemInput = document.getElementById('problem-input');
                if (problemInput.value.trim()) {
                    fetchAIAdvice(problemInput.value.trim());
                } else {
                    alertUser('कृपया अपनी फसल और समस्या का विवरण दें।', 'bg-yellow-100 border-yellow-500 text-yellow-700');
                }
            });
        });

        function alertUser(message, classes) {
            const container = document.getElementById('alert-container');
            container.innerHTML = `<div class="p-4 rounded-lg border-l-4 ${classes}" role="alert">
                                    <p class="font-bold">सूचना</p>
                                    <p>${message}</p>
                                </div>`;
            setTimeout(() => container.innerHTML = '', 5000);
        }
    </script>
    
    <!-- Main Content -->
    <div id="alert-container" class="fixed top-4 right-4 z-50 w-80"></div>

    <!-- Header / Navigation Bar -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center max-w-7xl">
            <!-- Logo (Reverted to Icon and Text only) -->
            <h1 class="flex items-center">
                <i data-lucide="leaf" class="w-8 h-8 text-green-700 mr-2"></i>
                <!-- Text Title -->
                <span class="text-xl md:text-2xl font-extrabold text-green-700">शिवगौरी एग्रो</span>
            </h1>
            
            <!-- Desktop Navigation -->
            <nav class="hidden md:flex space-x-6 text-gray-700 font-medium">
                <a href="#home" class="hover:text-green-600 transition duration-300">होम</a>
                <a href="#services" class="hover:text-green-600 transition duration-300">सेवाएँ</a>
                <a href="#ai-expert" class="hover:text-green-600 transition duration-300">AI विशेषज्ञ</a>
                <a href="#about" class="hover:text-green-600 transition duration-300">हमारे बारे में</a>
                <a href="#contact" class="hover:text-green-600 transition duration-300">संपर्क</a>
            </nav>

            <!-- Mobile Menu Button -->
            <button id="menu-button" class="md:hidden text-gray-700 focus:outline-none">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </div>

        <!-- Mobile Menu (Hidden by default) -->
        <nav id="mobile-menu" class="hidden md:hidden bg-gray-50 border-t border-gray-200">
            <a href="#home" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">होम</a>
            <a href="#services" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">सेवाएँ</a>
            <a href="#ai-expert" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">AI विशेषज्ञ</a>
            <a href="#about" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">हमारे बारे में</a>
            <a href="#contact" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">संपर्क</a>
        </nav>
    </header>

    <main>
        
        <!-- 1. Hero Section (Home) - Background Image Removed -->
        <section id="home" class="bg-lime-600 text-white text-center py-20 md:py-32 rounded-b-xl shadow-lg">
            <div class="container mx-auto px-6 max-w-4xl">
                <h2 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">
                    आपके खेत की प्रगति, हमारी जिम्मेदारी।
                </h2>
                <p class="text-xl md:text-2xl mb-8 font-light">
                    भारत के किसानों के लिए समर्पित: मुफ्त मार्गदर्शन और सशुल्क ऑन-साइट विज़िट।
                </p>
                <div class="space-y-4 md:space-y-0 md:space-x-6">
                    <a href="tel:8625830898" class="inline-flex items-center justify-center bg-lime-500 hover:bg-lime-600 text-gray-900 font-bold py-3 px-8 rounded-lg shadow-xl transition transform hover:scale-105 duration-300">
                        <i data-lucide="phone" class="w-5 h-5 mr-2"></i>
                        फ्री कॉल करें: 8625830898
                    </a>
                    <a href="https://forms.gle/qP81yKo2G9w7cP9z8" target="_blank" class="inline-flex items-center justify-center bg-white hover:bg-gray-100 text-green-700 font-bold py-3 px-8 rounded-lg shadow-xl transition transform hover:scale-105 duration-300">
                        <i data-lucide="form-input" class="w-5 h-5 mr-2"></i>
                        ऑन-साइट विज़िट फॉर्म
                    </a>
                </div>
            </div>
        </section>

        <!-- 2. Services Section -->
        <section id="services" class="py-16 md:py-24">
            <div class="container mx-auto px-6 max-w-7xl">
                <h3 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">हमारी सेवाएँ: आपकी ज़रूरत के अनुसार</h3>
                <p class="text-center text-lg text-gray-600 mb-12 max-w-2xl mx-auto">
                    हम ऑन-कॉल मुफ्त विशेषज्ञ मार्गदर्शन प्रदान करते हैं, और विस्तृत समाधान के लिए सशुल्क ऑन-साइट फार्म विजिट की सुविधा भी उपलब्ध है।
                </p>
                
                <div class="grid md:grid-cols-2 gap-8">
                    
                    <!-- Service Card 1: Free Advice -->
                    <div class="bg-white p-8 rounded-xl shadow-2xl border-t-4 border-lime-500 hover:shadow-3xl transition duration-500">
                        <div class="flex items-center mb-4">
                            <i data-lucide="message-square" class="w-8 h-8 text-lime-500 mr-3"></i>
                            <h4 class="text-2xl font-semibold text-gray-800">मुफ्त फोन/वीडियो सलाह</h4>
                        </div>
                        <p class="text-gray-600 mb-6">
                            छोटी समस्याओं, त्वरित मार्गदर्शन, या प्रारंभिक सलाह के लिए। हम समझते हैं कि हर किसान को तुरंत मदद की ज़रूरत हो सकती है।
                        </p>
                        <ul class="list-disc list-inside text-gray-700 space-y-2 mb-8 ml-4">
                            <li>त्वरित फसल स्वास्थ्य जाँच</li>
                            <li>कीट या रोग की पहचान</li>
                            <li>सरकारी योजनाओं पर सामान्य जानकारी</li>
                        </ul>
                        <a href="tel:8625830898" class="block w-full text-center bg-green-700 hover:bg-green-800 text-white font-bold py-3 rounded-lg transition duration-300">
                            अभी मुफ्त सलाह के लिए कॉल करें
                        </a>
                    </div>
                    
                    <!-- Service Card 2: Paid Visit -->
                    <div class="bg-white p-8 rounded-xl shadow-2xl border-t-4 border-green-700 hover:shadow-3xl transition duration-500">
                        <div class="flex items-center mb-4">
                            <i data-lucide="map-pin" class="w-8 h-8 text-green-700 mr-3"></i>
                            <h4 class="text-2xl font-semibold text-gray-800">सशुल्क ऑन-साइट विज़िट</h4>
                        </div>
                        <p class="text-gray-600 mb-6">
                            गहन मिट्टी विश्लेषण, अनुकूलित फसल योजना, और आपके खेत पर व्यक्तिगत दौरा। (शुल्क लागू)
                        </p>
                        <ul class="list-disc list-inside text-gray-700 space-y-2 mb-8 ml-4">
                            <li>मिट्टी और जल का विस्तृत परीक्षण</li>
                            <li>फसल चक्र और उर्वरक की कस्टम योजना</li>
                            <li>खेत की उत्पादकता बढ़ाने के लिए व्यक्तिगत रिपोर्ट</li>
                        </ul>
                        <a href="https://forms.gle/qP81yKo2G9w7cP9z8" target="_blank" class="block w-full text-center bg-lime-500 hover:bg-lime-600 text-gray-900 font-bold py-3 rounded-lg transition duration-300">
                            जांच फॉर्म भरें
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. AI Crop Expert Section -->
        <section id="ai-expert" class="py-16 md:py-24 bg-gray-100">
            <div class="container mx-auto px-6 max-w-7xl">
                <h3 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">
                    <i data-lucide="zap" class="w-7 h-7 inline-block text-yellow-500 mr-2"></i>
                    तुरंत फसल विशेषज्ञ सलाह (Ask the AI)
                </h3>
                <p class="text-center text-lg text-gray-600 mb-10 max-w-2xl mx-auto">
                    अपनी फसल और समस्या टाइप करें, और हमारा AI तुरंत प्राथमिक निदान और सामान्य समाधान देगा। (विस्तृत और व्यक्तिगत सलाह के लिए कृपया हमें कॉल करें!)
                </p>

                <div class="bg-white p-6 md:p-10 rounded-xl shadow-2xl max-w-3xl mx-auto">
                    <form id="ai-form">
                        <label for="problem-input" class="block text-lg font-medium text-gray-700 mb-3">
                            अपनी फसल का नाम और समस्या लिखें:
                        </label>
                        <textarea id="problem-input" rows="3" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-lime-500 focus:border-lime-500 resize-none" placeholder="उदाहरण: गेहूँ में पत्तियाँ पीली पड़ रही हैं और ग्रोथ रुक गई है।"></textarea>
                        
                        <div class="mt-6 flex justify-center">
                            <button type="submit" class="inline-flex items-center bg-green-700 hover:bg-green-800 text-white font-bold py-3 px-8 rounded-lg shadow-md transition duration-300 transform hover:scale-105">
                                <i data-lucide="cpu" class="w-5 h-5 mr-2"></i>
                                ✨ सलाह जनरेट करें
                            </button>
                        </div>
                    </form>

                    <!-- AI Output Area -->
                    <div id="ai-loading" class="hidden text-center mt-8">
                        <div class="animate-spin inline-block w-6 h-6 border-4 border-t-4 border-lime-500 border-opacity-25 rounded-full"></div>
                        <p class="mt-2 text-gray-600">AI विशेषज्ञ निदान जनरेट कर रहा है...</p>
                    </div>

                    <div id="ai-output" class="ai-output-enter mt-8 pt-6 border-t border-gray-200">
                        <h4 class="text-xl font-semibold text-gray-800 mb-4">AI विशेषज्ञ निदान:</h4>
                        <div id="ai-result-content" class="text-gray-700 leading-relaxed bg-lime-50 p-4 rounded-lg border border-lime-200">
                            <!-- AI result will appear here -->
                            <p>
                                💡 यह एक सामान्य AI निदान है। अपने खेत के लिए सटीक और व्यक्तिगत समाधान हेतु, कृपया **शिवगौरी एग्रो** के विशेषज्ञों को <a href="tel:8625830898" class="text-green-600 hover:underline font-medium">8625830898</a> पर कॉल करें।
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. About Us Section -->
        <section id="about" class="py-16 md:py-24">
            <div class="container mx-auto px-6 max-w-7xl">
                <div class="grid md:grid-cols-2 gap-12 items-center">
                    <!-- Image Placeholder -->
                    <div class="rounded-xl shadow-2xl overflow-hidden">
                        <img src="https://placehold.co/800x600/22c55e/ffffff?text=Shivgauri+Agro+Experts" alt="Shivgauri Agro Experts" class="w-full h-auto object-cover">
                    </div>
                    
                    <!-- Text Content -->
                    <div>
                        <h3 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">हम कौन हैं: शिवगौरी एग्रो</h3>
                        <p class="text-gray-600 mb-6 text-lg">
                            हम, शिव और गौरी, कृषि में दशकों के अनुभव के साथ यह मानते हैं कि सही समय पर सही सलाह किसी भी किसान की किस्मत बदल सकती है। 'शिवगौरी' नाम समृद्धि, उर्वरता और समर्पण का प्रतीक है, और हम इसी भावना से हर खेत को देखते हैं।
                        </p>
                        <p class="text-gray-600 mb-6 text-lg">
                            हमारा मिशन भारतीय किसानों को आधुनिक और टिकाऊ कृषि तकनीकों से सशक्त बनाना है। हम केवल सलाह नहीं देते, बल्कि आपकी उपज को अधिकतम करने के लिए एक भागीदार के रूप में काम करते हैं।
                        </p>
                        <a href="#services" class="inline-flex items-center text-green-700 font-semibold hover:text-green-600 transition duration-300">
                            हमारी सेवाएं देखें 
                            <i data-lucide="arrow-right" class="w-5 h-5 ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. Footer / Contact -->
        <footer id="contact" class="bg-gray-800 text-white py-12">
            <div class="container mx-auto px-6 max-w-7xl text-center">
                <div class="mb-6 space-y-2">
                    <h5 class="text-2xl font-bold text-lime-400">शिवगौरी एग्रो</h5>
                    <p class="text-gray-400">भारत के किसानों के लिए समर्पित विशेषज्ञ कृषि सलाह।</p>
                </div>
                
                <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8 text-lg">
                    <div class="flex items-center space-x-2">
                        <i data-lucide="mail" class="w-5 h-5 text-lime-400"></i>
                        <a href="mailto:gayatrisbairagi@gmail.com" class="hover:text-lime-400 transition duration-300">gayatrisbairagi@gmail.com</a>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i data-lucide="phone-call" class="w-5 h-5 text-lime-400"></i>
                        <a href="tel:8625830898" class="hover:text-lime-400 transition duration-300">8625830898</a>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i data-lucide="map-pin" class="w-5 h-5 text-lime-400"></i>
                        <span class="text-gray-400">भारत भर में ऑन-साइट सेवाएँ</span>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t border-gray-700">
                    <p class="text-sm text-gray-500">© 2024 Shivgauri Agro. All rights reserved. | App ID: <span id="display-app-id" class="font-mono text-xs">Loading...</span> | User ID: <span id="display-user-id" class="font-mono text-xs">Loading...</span></p>
                </div>
            </div>
        </footer>

    </main>
    
    <script>
        // Initialize Lucide Icons and add event listeners
        lucide.createIcons();

        // Mobile Menu Toggle
        document.getElementById('menu-button').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Close mobile menu on link click
        document.getElementById('mobile-menu').querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.add('hidden');
            });
        });

        // Display IDs for Firebase
        document.getElementById('display-app-id').textContent = appId;
        
        // Wait for Firebase auth to set userId (optional, but good practice)
        setTimeout(() => {
            const displayUserId = document.getElementById('display-user-id');
            if (typeof userId !== 'undefined') {
                displayUserId.textContent = userId;
            } else {
                 displayUserId.textContent = 'Anon (Initializing...)';
            }
        }, 3000); // Give time for async sign-in to complete
    </script>
</body>
</html>
